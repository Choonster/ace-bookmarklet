ace.define("ace/mode/lua",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/lua_highlight_rules"],function(require,exports,module){var oop=require("../lib/oop"),TextMode=require("./text").Mode,Tokenizer=require("../tokenizer").Tokenizer,LuaHighlightRules=require("./lua_highlight_rules").LuaHighlightRules,Mode=function(){this.$tokenizer=new Tokenizer((new LuaHighlightRules).getRules())};oop.inherits(Mode,TextMode),function(){this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line),tokenizedLine=this.$tokenizer.getLineTokens(line,state),tokens=tokenizedLine.tokens,chunks=["function","then","do","repeat"];if(state=="start"){var match=line.match(/^.*[\{\(\[]\s*$/);if(match)indent+=tab;else for(var i in tokens){var token=tokens[i];if(token.type!="keyword")continue;var chunk_i=chunks.indexOf(token.value);if(chunk_i!=-1){indent+=tab;break}}}return indent}}.call(Mode.prototype),exports.Mode=Mode}),ace.define("ace/mode/lua_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(require,exports,module){var oop=require("../lib/oop"),lang=require("../lib/lang"),TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,LuaHighlightRules=function(){var keywords=lang.arrayToMap("break|do|else|elseif|end|for|function|if|in|local|repeat|return|then|until|while|or|and|not".split("|")),builtinConstants=lang.arrayToMap("true|false|nil|_G|_VERSION".split("|")),builtinFunctions=lang.arrayToMap("string|xpcall|package|tostring|print|os|unpack|require|getfenv|setmetatable|next|assert|tonumber|io|rawequal|collectgarbage|getmetatable|module|rawset|math|debug|pcall|table|newproxy|type|coroutine|_G|select|gcinfo|pairs|rawget|loadstring|ipairs|_VERSION|dofile|setfenv|load|error|loadfile|sub|upper|len|gfind|rep|find|match|char|dump|gmatch|reverse|byte|format|gsub|lower|preload|loadlib|loaded|loaders|cpath|config|path|seeall|exit|setlocale|date|getenv|difftime|remove|time|clock|tmpname|rename|execute|lines|write|close|flush|open|output|type|read|stderr|stdin|input|stdout|popen|tmpfile|log|max|acos|huge|ldexp|pi|cos|tanh|pow|deg|tan|cosh|sinh|random|randomseed|frexp|ceil|floor|rad|abs|sqrt|modf|asin|min|mod|fmod|log10|atan2|exp|sin|atan|getupvalue|debug|sethook|getmetatable|gethook|setmetatable|setlocal|traceback|setfenv|getinfo|setupvalue|getlocal|getregistry|getfenv|setn|insert|getn|foreachi|maxn|foreach|concat|sort|remove|resume|yield|status|wrap|create|running".split("|")),stdLibaries=lang.arrayToMap("string|package|os|io|math|debug|table|coroutine".split("|")),metatableMethods=lang.arrayToMap("__add|__sub|__mod|__unm|__concat|__lt|__index|__call|__gc|__metatable|__mul|__div|__pow|__len|__eq|__le|__newindex|__tostring|__mode|__tonumber".split("|")),futureReserved=lang.arrayToMap("".split("|")),deprecatedIn5152=lang.arrayToMap("setn|foreach|foreachi|gcinfo|log10|maxn".split("|")),strPre="",decimalInteger="(?:(?:[1-9]\\d*)|(?:0))",hexInteger="(?:0[xX][\\dA-Fa-f]+)",integer="(?:"+decimalInteger+"|"+hexInteger+")",fraction="(?:\\.\\d+)",intPart="(?:\\d+)",pointFloat="(?:(?:"+intPart+"?"+fraction+")|(?:"+intPart+"\\.))",floatNumber="(?:"+pointFloat+")",comment_stack=[];this.$rules={start:[{token:"comment",regex:strPre+"\\-\\-\\[\\[.*\\]\\]"},{token:"comment",regex:strPre+"\\-\\-\\[\\=\\[.*\\]\\=\\]"},{token:"comment",regex:strPre+"\\-\\-\\[\\={2}\\[.*\\]\\={2}\\]"},{token:"comment",regex:strPre+"\\-\\-\\[\\={3}\\[.*\\]\\={3}\\]"},{token:"comment",regex:strPre+"\\-\\-\\[\\={4}\\[.*\\]\\={4}\\]"},{token:"comment",regex:strPre+"\\-\\-\\[\\={5}\\=*\\[.*\\]\\={5}\\=*\\]"},{token:"comment",regex:strPre+"\\-\\-\\[\\[.*$",merge:!0,next:"qcomment"},{token:"comment",regex:strPre+"\\-\\-\\[\\=\\[.*$",merge:!0,next:"qcomment1"},{token:"comment",regex:strPre+"\\-\\-\\[\\={2}\\[.*$",merge:!0,next:"qcomment2"},{token:"comment",regex:strPre+"\\-\\-\\[\\={3}\\[.*$",merge:!0,next:"qcomment3"},{token:"comment",regex:strPre+"\\-\\-\\[\\={4}\\[.*$",merge:!0,next:"qcomment4"},{token:function(value){var pattern=/\-\-\[(\=+)\[/,match;return(match=pattern.exec(value))!=null&&(match=match[1])!=undefined&&comment_stack.push(match.length),"comment"},regex:strPre+"\\-\\-\\[\\={5}\\=*\\[.*$",merge:!0,next:"qcomment5"},{token:"comment",regex:"\\-\\-.*$"},{token:"string",regex:strPre+"\\[\\[.*\\]\\]"},{token:"string",regex:strPre+"\\[\\=\\[.*\\]\\=\\]"},{token:"string",regex:strPre+"\\[\\={2}\\[.*\\]\\={2}\\]"},{token:"string",regex:strPre+"\\[\\={3}\\[.*\\]\\={3}\\]"},{token:"string",regex:strPre+"\\[\\={4}\\[.*\\]\\={4}\\]"},{token:"string",regex:strPre+"\\[\\={5}\\=*\\[.*\\]\\={5}\\=*\\]"},{token:"string",regex:strPre+"\\[\\[.*$",merge:!0,next:"qstring"},{token:"string",regex:strPre+"\\[\\=\\[.*$",merge:!0,next:"qstring1"},{token:"string",regex:strPre+"\\[\\={2}\\[.*$",merge:!0,next:"qstring2"},{token:"string",regex:strPre+"\\[\\={3}\\[.*$",merge:!0,next:"qstring3"},{token:"string",regex:strPre+"\\[\\={4}\\[.*$",merge:!0,next:"qstring4"},{token:function(value){var pattern=/\[(\=+)\[/,match;return(match=pattern.exec(value))!=null&&(match=match[1])!=undefined&&comment_stack.push(match.length),"string"},regex:strPre+"\\[\\={5}\\=*\\[.*$",merge:!0,next:"qstring5"},{token:"string",regex:strPre+'"(?:[^\\\\]|\\\\.)*?"'},{token:"string",regex:strPre+"'(?:[^\\\\]|\\\\.)*?'"},{token:"constant.numeric",regex:floatNumber},{token:"constant.numeric",regex:integer+"\\b"},{token:function(value){return keywords.hasOwnProperty(value)?"keyword":builtinConstants.hasOwnProperty(value)?"constant.language":futureReserved.hasOwnProperty(value)?"invalid.illegal":stdLibaries.hasOwnProperty(value)?"constant.library":deprecatedIn5152.hasOwnProperty(value)?"invalid.deprecated":builtinFunctions.hasOwnProperty(value)?"support.function":metatableMethods.hasOwnProperty(value)?"support.function":"identifier"},regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\/|%|\\#|\\^|~|<|>|<=|=>|==|~=|=|\\:|\\.\\.\\.|\\.\\."},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:"text",regex:"\\s+"}],qcomment:[{token:"comment",regex:"(?:[^\\\\]|\\\\.)*?\\]\\]",next:"start"},{token:"comment",merge:!0,regex:".+"}],qcomment1:[{token:"comment",regex:"(?:[^\\\\]|\\\\.)*?\\]\\=\\]",next:"start"},{token:"comment",merge:!0,regex:".+"}],qcomment2:[{token:"comment",regex:"(?:[^\\\\]|\\\\.)*?\\]\\={2}\\]",next:"start"},{token:"comment",merge:!0,regex:".+"}],qcomment3:[{token:"comment",regex:"(?:[^\\\\]|\\\\.)*?\\]\\={3}\\]",next:"start"},{token:"comment",merge:!0,regex:".+"}],qcomment4:[{token:"comment",regex:"(?:[^\\\\]|\\\\.)*?\\]\\={4}\\]",next:"start"},{token:"comment",merge:!0,regex:".+"}],qcomment5:[{token:function(value){var pattern=/\](\=+)\]/,rule=this.rules.qcomment5[0],match;rule.next="start";if((match=pattern.exec(value))!=null&&(match=match[1])!=undefined){var found=match.length,expected;(expected=comment_stack.pop())!=found&&(comment_stack.push(expected),rule.next="qcomment5")}return"comment"},regex:"(?:[^\\\\]|\\\\.)*?\\]\\={5}\\=*\\]",next:"start"},{token:"comment",merge:!0,regex:".+"}],qstring:[{token:"string",regex:"(?:[^\\\\]|\\\\.)*?\\]\\]",next:"start"},{token:"string",merge:!0,regex:".+"}],qstring1:[{token:"string",regex:"(?:[^\\\\]|\\\\.)*?\\]\\=\\]",next:"start"},{token:"string",merge:!0,regex:".+"}],qstring2:[{token:"string",regex:"(?:[^\\\\]|\\\\.)*?\\]\\={2}\\]",next:"start"},{token:"string",merge:!0,regex:".+"}],qstring3:[{token:"string",regex:"(?:[^\\\\]|\\\\.)*?\\]\\={3}\\]",next:"start"},{token:"string",merge:!0,regex:".+"}],qstring4:[{token:"string",regex:"(?:[^\\\\]|\\\\.)*?\\]\\={4}\\]",next:"start"},{token:"string",merge:!0,regex:".+"}],qstring5:[{token:function(value){var pattern=/\](\=+)\]/,rule=this.rules.qstring5[0],match;rule.next="start";if((match=pattern.exec(value))!=null&&(match=match[1])!=undefined){var found=match.length,expected;(expected=comment_stack.pop())!=found&&(comment_stack.push(expected),rule.next="qstring5")}return"string"},regex:"(?:[^\\\\]|\\\\.)*?\\]\\={5}\\=*\\]",next:"start"},{token:"string",merge:!0,regex:".+"}]}};oop.inherits(LuaHighlightRules,TextHighlightRules),exports.LuaHighlightRules=LuaHighlightRules})